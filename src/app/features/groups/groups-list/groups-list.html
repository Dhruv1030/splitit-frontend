<div class="groups-container">
  <!-- Header -->
  <div class="header">
    <h1 class="title">My Groups</h1>
    
    <!-- Search Bar -->
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search groups</mat-label>
      <input
        matInput
        [(ngModel)]="searchQuery"
        (ngModelChange)="onSearch()"
        placeholder="Search by name or category"
      />
      <mat-icon matPrefix>search</mat-icon>
    </mat-form-field>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredGroups.length === 0 && searchQuery === ''" class="empty-state">
    <mat-icon class="empty-icon">groups</mat-icon>
    <h2>No Groups Yet</h2>
    <p>Create your first group to start tracking shared expenses</p>
    <button mat-raised-button color="primary" (click)="onCreateGroup()">
      <mat-icon>add</mat-icon>
      Create Group
    </button>
  </div>

  <!-- No Search Results -->
  <div *ngIf="!loading && filteredGroups.length === 0 && searchQuery !== ''" class="empty-state">
    <mat-icon class="empty-icon">search_off</mat-icon>
    <h2>No Results Found</h2>
    <p>Try adjusting your search query</p>
  </div>

  <!-- Groups Grid -->
  <div *ngIf="!loading && filteredGroups.length > 0" class="groups-grid">
    <mat-card
      *ngFor="let group of filteredGroups"
      class="group-card"
      (click)="onGroupClick(group.id)"
      matRipple
    >
      <mat-card-header>
        <div class="group-icon" [style.background-color]="getCategoryColor(group.category)">
          <mat-icon>{{ getCategoryIcon(group.category) }}</mat-icon>
        </div>
        <mat-card-title>{{ group.name }}</mat-card-title>
        <mat-card-subtitle *ngIf="group.description">
          {{ group.description }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="group-info">
          <div class="info-item">
            <mat-icon class="info-icon">people</mat-icon>
            <span>{{ group.members.length || 0 }} members</span>
          </div>
          <div class="info-item">
            <mat-icon class="info-icon">attach_money</mat-icon>
            <span>{{ group.currency }}</span>
          </div>
        </div>

        <mat-chip-set>
          <mat-chip>
            <mat-icon matChipAvatar>{{ getCategoryIcon(group.category) }}</mat-icon>
            {{ group.category }}
          </mat-chip>
          <mat-chip>
            <mat-icon matChipAvatar>attach_money</mat-icon>
            {{ group.currency }}
          </mat-chip>
        </mat-chip-set>
      </mat-card-content>

      <mat-card-actions align="end">
        <button
          mat-button
          color="primary"
          (click)="onGroupClick(group.id); $event.stopPropagation()"
        >
          View Details
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Floating Action Button -->
  <button
    *ngIf="!loading"
    mat-fab
    color="primary"
    class="fab"
    (click)="onCreateGroup()"
    matTooltip="Create Group"
  >
    <mat-icon>add</mat-icon>
  </button>
</div>
